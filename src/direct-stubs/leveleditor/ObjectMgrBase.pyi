from collections.abc import Iterable
from typing import SupportsInt, TypeVar

from direct._typing import Incomplete, Obj, Unused
from direct.actor import Actor
from panda3d._typing import Mat4f, Vec3f
from panda3d.core import LMatrix4f, NodePath, PandaNode
from .LevelEditor import LevelEditor

_N = TypeVar('_N', bound=PandaNode)

class PythonNodePath(NodePath[_N]):
    def __init__(self, node: _N) -> None: ...

class ObjectMgrBase:
    editor: LevelEditor
    objects: dict[str, Obj]
    npIndex: dict[NodePath, str]
    saveData: list[str]
    objectsLastXform: dict[str, LMatrix4f]
    lastUid: str
    lastUidMode: int
    currNodePath: NodePath | None
    currLiveNP: NodePath | None
    Actor: list[Obj[Actor.Actor, Incomplete]]
    Nodes: list[Obj[NodePath, Incomplete]]
    def __init__(self, editor: LevelEditor) -> None: ...
    def reset(self) -> None: ...
    def genUniqueId(self) -> str: ...
    def addNewCurveFromFile(
        self,
        curveInfo: Iterable[tuple[str, Vec3f]],
        degree,
        uid: str | None = ...,
        parent=...,
        fSelectObject: bool = ...,
        nodePath: Unused = ...,
    ) -> NodePath: ...
    def addNewCurve(
        self, curveInfo, degree, uid: str | None = ..., parent=..., fSelectObject: bool = ..., nodePath: NodePath | None = ...
    ) -> NodePath: ...
    def addNewObject(
        self,
        typeName,
        uid: str | None = ...,
        model=...,
        parent=...,
        anim=...,
        fSelectObject: bool = ...,
        nodePath=...,
        nameStr: str | None = ...,
    ) -> NodePath | None: ...
    def removeObjectById(self, uid: str) -> None: ...
    def removeObjectByNodePath(self, nodePath: NodePath) -> None: ...
    def findObjectById(self, uid: str): ...
    def findObjectByNodePath(self, nodePath: NodePath) -> Obj | None: ...
    def findObjectByNodePathBelow(self, nodePath: NodePath) -> Obj | None: ...
    def findObjectsByTypeName(self, typeName: str) -> list[Obj]: ...
    def deselectAll(self) -> None: ...
    def selectObject(self, nodePath: NodePath, fLEPane: bool = ...) -> None: ...
    def selectObjectCB(self, obj: Obj, fLEPane: bool) -> None: ...
    def updateObjectPropertyUI(self, obj: Obj) -> None: ...
    def onEnterObjectPropUI(self, event) -> None: ...
    def onLeaveObjectPropUI(self, event) -> None: ...
    def spawnUpdateObjectUITask(self) -> None: ...
    def updateObjectUITask(self, state): ...
    def updateObjectTransform(self, event) -> None: ...
    def setObjectTransform(self, uid: str, xformMat: Mat4f) -> None: ...
    def updateObjectColor(self, r: float, g: float, b: float, a: float, np: NodePath | None = ...) -> None: ...
    def updateObjectModel(self, model, obj: Obj, fSelectObject: bool = ...) -> None: ...
    def updateObjectAnim(self, anim, obj: Obj, fSelectObject: bool = ...) -> None: ...
    def updateObjectModelFromUI(self, event, obj: Obj) -> None: ...
    def updateObjectAnimFromUI(self, event, obj: Obj) -> None: ...
    def updateObjectProperty(self, event, obj: Obj, propName: str) -> None: ...
    def updateObjectPropValue(self, obj: Obj, propName, val, fSelectObject: bool = ..., fUndo: bool = ...) -> None: ...
    def updateCurve(self, val: SupportsInt, obj: Obj) -> None: ...
    def updateObjectProperties(self, nodePath: NodePath, propValues: Iterable[str]) -> None: ...
    def traverse(self, parent, parentId=...) -> None: ...
    def getSaveData(self) -> list: ...
    def getPreSaveData(self) -> None: ...
    def getPostSaveData(self) -> None: ...
    def duplicateObject(self, nodePath: NodePath, parent=...) -> NodePath: ...
    def duplicateChild(self, nodePath: NodePath, parent) -> None: ...
    def duplicateSelected(self) -> None: ...
    def makeSelectedLive(self) -> None: ...
    def replaceObjectWithTypeName(self, obj: Obj, typeName: str) -> None: ...
    def flatten(self, newobjModel, model, objDef, uid) -> None: ...
    def findActors(self, parent) -> None: ...
    def findNodes(self, parent) -> None: ...
